<?xml version="1.0"?>

<bindings id="custombuttonsConsoleBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

 <binding id="console-error-source" extends="xul:box">
  <content>
   <xul:label class="text-link" xbl:inherits="href,value=href" crop="right"/>
  </content>

  <handlers>
   <handler event="click" phase="capturing" button="0" preventdefault="true">
    <![CDATA[
var uri = "custombutton://buttons/";
var url = this. getAttribute ("href");
var windowId = url. match (/windowId=(\w+)/) [1];
var buttonId = url. match (/id=([\w-]+)/) [1];
var phase = url. match (/@(\w+)/) [1];
var line = this. getAttribute ("line");
uri += windowId + "/" + phase + "/" + buttonId + "#" + line;
var cbs = Components. classes ["@xsms.nm.ru/custombuttons/cbservice;1"].
    getService (Components. interfaces. cbICustomButtonsService);
cbs. editButton (null, uri, null);
    ]]>
   </handler>
  </handlers>
 </binding>
 <binding id="console2-error-source" extends="chrome://console2/content/console2.xml#item">
  <handlers>
   <handler event="click" phase="capturing" button="0" preventdefault="true">
    <![CDATA[
     event. stopPropagation ();
var uri = "custombutton://buttons/";
var url = this. getAttribute ("href");
var windowId = url. match (/windowId=(\w+)/) [1];
var buttonId = url. match (/id=([\w-]+)/) [1];
var phase = url. match (/@(\w+)/) [1];
var line = this. getAttribute ("line");
uri += windowId + "/" + phase + "/" + buttonId + "#" + line;
var cbs = Components. classes ["@xsms.nm.ru/custombuttons/cbservice;1"].
    getService (Components. interfaces. cbICustomButtonsService);
cbs. editButton (null, uri, null);
    ]]>
   </handler>
  </handlers>
 </binding>
</bindings>
